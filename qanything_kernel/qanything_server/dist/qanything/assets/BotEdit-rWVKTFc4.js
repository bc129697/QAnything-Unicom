import{_ as a}from"./bot-avatar-CBCRm2Zm.js";import{u as s}from"./useBots-wIryKe1o.js";import{r as t,u as e}from"./urlConfig-5Ad6E0st.js";import{r as i}from"./router-DVUaRRVo.js";import{g as o}from"./index-DAdVxPIc.js";import{d as r,j as l,r as n,an as d,ao as u,k as c,y as v,H as m,q as b,c as f,z as p,M as _,E as g,A as k,a1 as y,F as h,X as j,Y as x,D as B}from"./index-BVM7diGR.js";import{S as w}from"./index-BFggBRAt.js";const C={class:"container"},I={class:"bot-edit"},q={key:0,class:"loading"},$={key:1},z={class:"header"},A=(a=>(j("data-v-f0ffc33e"),a=a(),x(),a))((()=>m("img",{src:a,alt:"avatar"},null,-1))),E={class:"name"},F={class:"tabs"},L=["onClick"],M=B(r({__name:"BotEdit",setup(a){const{getCurrentRoute:r,changePage:j}=i(),{tabIndex:x,curBot:B}=l(s()),{setTabIndex:M,setCurBot:S,setKnowledgeList:D}=s(),H=o().bots,K=[{name:H.edit,value:0},{name:H.publish,value:1}],P=n(null),Q=n(!0),R=d(u,{style:{fontSize:"48px"},spin:!0}),T=async a=>{try{const s=await t(await e.queryBotInfo({bot_id:a}));S(s[0]),(async a=>{try{let s=[...(await t(await e.kbList())).filter((a=>!/.*_FAQ$/.test(a.kb_name)))];s=a&&a.length?s.map((s=>(a.some((a=>a===s.kb_id))?s.state=1:s.state=0,s))):s.map((a=>(a.state=0,a))),D(s)}catch(s){k.error(s.msg||"获取知识库列表失败")}})(s[0].kb_ids),Q.value=!1}catch(s){k.error(s.msg||"获取Bot信息失败")}};return function(){const a=r();P.value=a.value.params.botId,T(P.value)}(),(a,s)=>{var t;const e=w,i=y("router-view");return c(),v("div",C,[m("div",I,[b(Q)?(c(),v("div",q,[f(e,{indicator:b(R)},null,8,["indicator"])])):(c(),v("div",$,[m("div",z,[A,m("div",E,p(null==(t=b(B))?void 0:t.bot_name),1),m("div",F,[(c(),v(_,null,g(K,(a=>m("div",{key:a.name,class:h(["tab-item",b(x)===a.value?"tab-active":"",b(B).kb_ids&&b(B).kb_ids.length||1!==a.value?"":"tab-disable"]),onClick:s=>{var t;(1!==(t=a.value)||B.value.kb_ids&&B.value.kb_ids.length)&&x.value!==t&&(M(t),j(0===t?`/bots/${P.value}/edit`:`/bots/${P.value}/publish`))}},p(a.name),11,L))),64))])]),f(i)]))])])}}}),[["__scopeId","data-v-f0ffc33e"]]);export{M as default};
